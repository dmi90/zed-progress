<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Distance covered by Zed during the 1st Cycleathon</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: sans-serif;
            background: #2f3640;
            color: white;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        canvas {
            width: 100vw;
            height: 100vh;
        }

        h2 {
            color: white;
            position: absolute;
            top: 2rem;
            font-size: 2.5rem;
            text-align: center;
            width: 100%;
            z-index: 2;
        }
    </style>
</head>
<body>
<h2>Distance covered by Zed during the 1st Cycleathon</h2>
<canvas id="kmChart"></canvas>

<script>
    const labels = [
        "Budapest", "Siófok", "Pécs", "Pécs", "Zalaegerszeg", "Graz",
        "Szombathely", "Bratislava", "Budapest", "Gyöngyös",
        "Miskolc", "Debrecen", "Békéscsaba", "Szolnok", "Budapest"
    ];

    const actual = [
        0, 138.9, 297.7, 326.1, 501.7, 635.5,
        749.5, 875.2, 1080.3, 1190.2,
        1313.9, 1486.0, 1634.5, 1748.5, 1864.7
    ];

    const goal = [
        0, 355.2, 545.0, 601.6, 1157.6, 1271.8,
        1364.8, 1411.5, 1586.4, 1777.7,
        1883.1, 2044.3, 2189.3, 2357.7, 2429.8
    ];

    const ctx = document.getElementById('kmChart').getContext('2d');

    const data = {
        labels: [],
        datasets: [
            {
                label: 'Distance Covered (km)',
                data: [],
                borderColor: 'rgba(255, 20, 147, 1)',
                backgroundColor: 'rgba(255, 20, 147, 0.2)',
                fill: false,
                tension: 0.4
            },
            {
                label: 'Goal Distance (km)',
                data: [],
                borderColor: 'rgba(0, 255, 255, 1)',
                backgroundColor: 'rgba(0, 255, 255, 0.2)',
                fill: false,
                tension: 0.4
            }
        ]
    };

    const config = {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            animation: false,
            scales: {
                y: {
                    beginAtZero: true,
                    min: 0,
                    max: 2500,
                    title: {
                        display: true,
                        text: 'Kilometers',
                        color: 'white'
                    },
                    grid: {
                        display: false
                    }
                },
                x: {
                    ticks: {
                        autoSkip: false,
                        color: 'white'
                    },
                    grid: {
                        drawOnChartArea: false
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'top',
                    labels: {
                        color: 'white'
                    }
                },
                title: {
                    display: true,
                    text: 'Distance covered by Zed during the 1st Cycleathon',
                    color: 'white',
                    padding: {
                        top: 20
                    }
                }
            }
        }
    };

    const kmChart = new Chart(ctx, config);

    let frame = 0;
    const totalFrames = 1200;

    const interpolatedActual = [];
    const interpolatedGoal = [];
    const interpolatedLabels = [];

    const stepsPerSegment = Math.floor(totalFrames / (actual.length - 1));

    for (let i = 0; i < actual.length - 1; i++) {
        for (let j = 0; j < stepsPerSegment; j++) {
            const t = j / stepsPerSegment;
            interpolatedActual.push(actual[i] + (actual[i + 1] - actual[i]) * t);
            interpolatedGoal.push(goal[i] + (goal[i + 1] - goal[i]) * t);
            interpolatedLabels.push(j === stepsPerSegment - 1 ? labels[i + 1] : "");
        }
    }

    interpolatedActual.push(actual[actual.length - 1]);
    interpolatedGoal.push(goal[goal.length - 1]);
    interpolatedLabels.push(labels[labels.length - 1]);

    function animateChart() {
        if (frame < interpolatedActual.length) {
            data.datasets[0].data.push(interpolatedActual[frame]);
            data.datasets[1].data.push(interpolatedGoal[frame]);
            data.labels.push(interpolatedLabels[frame]);
            kmChart.update();
            frame++;
            requestAnimationFrame(animateChart);
        }
    }

    animateChart();
</script>
</body>
</html>
